# go è¯­è¨€çš„æŒ‡é’ˆå¦‚ä½•åƒ c é‚£æ ·è¿ç®—
> é€šè¿‡ä¾‹å­æ¥å­¦ä¹  unsafe åŒ…



**ç¯å¢ƒä¿¡æ¯**

```go
go version go1.15.5  // ä¸åŒç‰ˆæœ¬çš„ api å¯èƒ½ä¼šä¸ä¸€æ ·
```



### unsafe æœ‰ä»€ä¹ˆç”¨ï¼Ÿ çœŸçš„æœ‰è¿™ä¹ˆå‰å®³å—ï¼Ÿ

1. unsafe åŒ…æä¾›çš„æ“ä½œä¼šç»•è¿‡ go ç¨‹åºçš„ç±»å‹ç±»å‹å®‰å…¨
2. unsafe åŒ…æä¾›çš„æ“ä½œä¸æ˜¯å¯ç§»æ¤çš„

###### ArbitraryType

```go
type ArbitraryType int
```

> `ArbitraryType` åœ¨è¿™é‡Œç”¨ä½œæ–‡æ¡£çš„è¯´æ˜ï¼Œ å®é™…ä¸Šä¸æ˜¯ unsafe åŒ…çš„ä¸€éƒ¨åˆ†ã€‚ å®ƒå¯ä»¥ç”¨æ¥è¡¨ç¤ºä»»ä½• `go` ç±»å‹ã€‚



###### Pointer

```go
type Pointer *ArbitraryType
```

> Pointer è¡¨ç¤ºä»»æ„ç±»å‹çš„æŒ‡é’ˆã€‚ï¼ˆæå–ä¸»å¹²: Pointeræ˜¯æŒ‡é’ˆï¼‰
>
> æœ‰å››ä¸ªç‰¹æ®Šçš„æ“ä½œé€‚ç”¨äº Pointer ç±»å‹ï¼Œ ä½†æ˜¯ä¸é€‚ç”¨äºå…¶ä»–çš„ç±»å‹ï¼š
>
> -ä»»ä½•ç±»å‹çš„æŒ‡é’ˆå€¼éƒ½å¯ä»¥è½¬æ¢ä¸ºPointerã€‚
> -æŒ‡é’ˆå¯ä»¥è½¬æ¢ä¸ºä»»ä½•ç±»å‹çš„æŒ‡é’ˆå€¼ã€‚
> -uintptrå¯ä»¥è½¬æ¢ä¸ºPointerã€‚
> -æŒ‡é’ˆå¯ä»¥è½¬æ¢ä¸ºuintptrã€‚
>
> åŸºäºä»¥ä¸Šå››ç‚¹ï¼Œ æŒ‡é’ˆå¯ä»¥å…è®¸ç¨‹åºç»•è¿‡ç³»ç»Ÿçš„ç±»å‹æ£€æŸ¥å¹¶è¯»å†™ä»»æ„çš„å†…å­˜ï¼Œ å› æ­¤ï¼Œ ä½¿ç”¨ä½¿ç”¨æŒ‡é’ˆæ—¶åº”è¯¥æ ¼å¤–åœ°å°å¿ƒã€‚ (Fatal âš ï¸ğŸ¶)



###### ä½¿ç”¨ Pointer è¿˜æœ‰æ¨¡å¼ï¼Ÿ

> ä»¥ä¸‹æ¶‰åŠåˆ°çš„ Pointer çš„æ¨¡å¼æ˜¯æœ‰æ•ˆçš„

**ä¸æ˜¯ä½¿ç”¨è¿™äº›æ¨¡å¼çš„ä»£ç å¯èƒ½åœ¨ç°åœ¨æˆ–è€…å°†æ¥æ— æ•ˆ** (ps: å°±æ˜¯ä¸éµå¾ªè¿™äº›æ ‡å‡†å¯èƒ½ä¼šä½¿è‡ªå·±å†™çš„ä»£ç å˜æˆä¸€ä¸ªå‘)



æ€ä¹ˆçŸ¥é“è‡ªå·±çš„ä»£ç æ˜¯å¦éµå¾ªè¿™äº›æ ‡å‡†äº†å‘¢ï¼Ÿ

```shell
go vet 
```

ä½¿ç”¨ go vet å‘½ä»¤å¯ä»¥æ‰¾å‡ºä¸ç¬¦åˆ Pointer æ¨¡å¼çš„ä»£ç ï¼Œ ä½†æ˜¯ go vet å¹¶ä¸èƒ½ä¿è¯ä»£ç æœ‰æ•ˆï¼ˆç»“è®º: ç»“æœè¿˜æ˜¯å‘ï¼‰



###### Pointer æœ‰å“ªäº›ä½¿ç”¨æ¨¡å¼å‘¢ï¼Ÿ

1. å°†* T1è½¬æ¢ä¸ºæŒ‡å‘* T2çš„æŒ‡é’ˆ

   > å‰ææ˜¯ï¼š T2 ä¸å¤§äº T1(å ç”¨çš„å†…å­˜ç©ºé—´), å¹¶ä¸”å’Œä¸¤ä¸ªäº«æœ‰ç›¸åŒçš„å†…å­˜å¸ƒå±€ã€‚åˆ™æ­¤è½¬æ¢å…è®¸å°†ä¸€ç§ç±»å‹çš„æ•°æ®é‡æ–°è§£é‡Šä¸ºå¦ä¸€ç§ç±»å‹çš„æ•°æ®ã€‚

   ğŸŒ° float64 å ç”¨ 8 å­—èŠ‚å¤§å°ï¼Œ uint64 ä¹Ÿå ç”¨ 8 å­—èŠ‚å¤§å°ï¼Œ `IEEE 754` æ ‡å‡†

   ```go
   func Float64bits(f float64) uint64 { return *(*uint64)(unsafe.Pointer(&f)) }
   ```

    

2. å°†Pointerè½¬æ¢ä¸ºuintptr

   > å°† Pointer è½¬æ¢ä¸º uintptr ä¼šç”Ÿæˆpointer æ‰€æŒ‡å‘å€¼å¾—å†…å­˜çš„(æ•´æ•°)åœ°å€ã€‚ è¿™ç§ç”¨æ³•é€šå¸¸å°±æ˜¯ç”¨æ¥æ‰“å°è¾“å‡ºï¼Ÿ
   >
   > **å°† uintptr** è½¬å›åˆ° Pointer é€šå¸¸æ˜¯æ— æ•ˆçš„ã€‚

   åˆ’é‡ç‚¹:  uintptr æ˜¯æ•´æ•°ï¼Œ è€Œä¸æ˜¯å¼•ç”¨ã€‚ å°† Pointer è½¬æ¢ä¸º uintptr ä¼šåˆ›å»ºä¸€ä¸ªæ²¡æœ‰æŒ‡é’ˆæ„ä¹‰çš„æ•´æ•°å€¼ã€‚ å³ä½¿ uintptr ä¿ç•™äº†æŸä¸ªå¯¹è±¡çš„åœ°å€ï¼Œ åƒåœ¾â™»ï¸å™¨ä¹Ÿä¸ä¼šåœ¨å¯¹è±¡ç§»åŠ¨æ—¶æ›´æ–°æ”¹å¯¹è±¡çš„å€¼ï¼Œ ä¹Ÿä¸ä¼šé˜»æ­¢ uintptr æ‰€æŒ‡å‘çš„å¯¹è±¡è¢«â™»ï¸æ‰ã€‚ 

3. ä½¿ç”¨ç®—æœ¯è¿ç®—å°† Pointer è½¬ä¸º uintptr å¹¶è¿”å›Pointer

   > å¦‚æœ p  æ‰€æŒ‡å‘çš„å¯¹è±¡å·²ç»åˆ†é…å†…å­˜ï¼Œ åˆ™å¯ä»¥é€šè¿‡è½¬æ¢ä¸º uintptr çš„æ–¹å¼ï¼Œ æ·»åŠ åç§»é‡çš„æ–¹å¼è½¬å› Pointer çš„æ–¹å¼æ¨è¿› Pointer
   >
   > ```go
   > p = unsafe.Pointer(uintptr(p) + offset)
   > ```
   >
   > è¿™ç§æ–¹å¼å¸¸ç”¨åœ¨è®¿é—®ç»“æ„ä½“ä¸­çš„å­—æ®µæˆ–è€…æ•°ç»„ä¸­çš„å…ƒç´ 
   >
   > ```go
   > //ç­‰ä»·æ“ä½œï¼Œå‡å®šè®¿é—®çš„æ˜¯ç»“æ„ä½“
   > //f:= unsafe.Pointer(&s.f)
   > 
   > f:= unsafe.Pointer(uinptr(unsafe.Pointer(&s)) + unsafe.Offsetof(s.f))
   > ```
   >
   > æ“ä½œå¯¹è±¡æ˜¯æ•°ç»„ï¼š
   >
   > ```go
   > // ç­‰ä»·æ“ä½œ
   > // e:= unsafe.Pointer(&x[i])
   > 
   > e:= unsafe.Pointer(uintptr(unsafe.Pointer(&x)) + i *  unsafe.Offsetof(x[0]))
   > 
   > 
   > ```
   >
   > è¿™ä¸¤ç§æ“ä½œé€šè¿‡æŒ‡é’ˆå¢åŠ æˆ–è€…å‡å»åç§»é‡éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚ 
   >
   > ä½¿ç”¨ `&^` æ¥æ“ä½œæŒ‡é’ˆä¹Ÿæ˜¯æœ‰ç”¨çš„ï¼Œ ä¸è¿‡è¿™ç§é€šå¸¸ç”¨äºå†…å­˜å¯¹é½æ“ä½œ
   >
   > **æ‰€æœ‰çš„ä¾‹å­çš„ä¸­ï¼Œ ç»“æ„éƒ½å¿…é¡»æŒ‡å‘åŸæ¥åˆ†é…çš„å¯¹è±¡**

   

   å’Œ `C` ä¸ä¸€æ ·çš„æ˜¯ï¼Œ å°†æŒ‡é’ˆç§»åŠ¨åˆ°å®ƒåŸå§‹åˆ†é…ç©ºé—´çš„æœ€æœ«å°¾æ˜¯æ— æ•ˆçš„

   æ¯”å¦‚ï¼š

   ```go
   // end å·²ç»æŒ‡å‘äº†åˆ†é…çš„ç©ºé—´ä¹‹å¤–äº†
   var s otherType
   end = unsafe.Pointer(uintptr(unsafe.Pointer(&s)) + unsafe.Sizeof(s))
   ```

   åœ¨æ¯”å¦‚åƒè¿™æ ·çš„ï¼š

   ```go
   //	b := make([]byte, n)
   //	end = unsafe.Pointer(uintptr(unsafe.Pointer(&b[0])) + uintptr(n))
   ```

   `end` å·²ç»æŒ‡å‘äº†æ‰€åˆ†é…çš„ç©ºé—´ä¹‹å¤–äº†

   æ³¨æ„ï¼š ä¸¤ä¸ªè½¬æ¢ä¹‹é—´å¿…é¡»å‡ºç°åœ¨ç›¸åŒçš„è¡¨è¾¾å¼ä¹‹ä¸­ï¼Œ å¹¶ä¸”ä»–ä»¬ä¹‹ååªæœ‰ç®—æœ¯è¿ç®—

   åƒè¿™æ ·æ˜¯æ— æ•ˆçš„ï¼š

   ```go
   // åœ¨è¿”å› p ä¹‹å‰ï¼Œ u ä¹‹é—´éš”äº†ä¸€ä¸ªè¡¨è¾¾å¼äº†ï¼Œ åœ¨å±é™©çš„æƒ…å†µä¸‹ï¼Œ å¯èƒ½å·²ç»é‡Šæ”¾äº†æŒ‡å‘çš„å¯¹è±¡äº†
   u:=uintptr(p) 
   
   p = unsafe.Pointer(u + offset)
   
   ```

   æ³¨æ„ï¼š Pointer å¿…é¡»æ˜¯æŒ‡å‘å·²ç»åˆ†é…çš„å¯¹è±¡ï¼Œ æ‰€ä»¥å®ƒä¸èƒ½ä¸º `nil`

   `nil` æ˜¯æ— æ•ˆçš„

   ```go
   u:= unsafe.Pointer(nil)
   p:=unsafe.Pointer(uintptr(u) + offset)
   ```

   

4. è°ƒç”¨ `syscall.Syscall` æ—¶å°†æŒ‡é’ˆè½¬ä¸º uintptr

   `syscall`åŒ…çš„ `Syscall` å‡½æ•°ç›´æ¥ä¼ é€’ uintptr ç±»å‹çš„å‚æ•°åˆ°æ“ä½œç³»ç»Ÿï¼Œ ç„¶åæ“ä½œç³»ç»Ÿå¯ä»¥æ ¹æ®è°ƒç”¨çš„è¯¦ç»†ä¿¡æ¯å°†å…¶ä¸­ä¸€äº›é‡æ–°è§£æä¸ºæŒ‡é’ˆã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œ æ“ä½œç³»ç»Ÿå®ç°å°†æŸäº›å‚æ•°ä» uintptr ç±»å‹éšå¼è½¬æ¢ä¼šæŒ‡é’ˆã€‚ 

   å¦‚æœå¿…é¡»å°†æŒ‡é’ˆç±»å‹çš„å‚æ•°è½¬æ¢ä¸º uintptr ç”¨ä½œå‚æ•°ï¼Œ è½¬æ¢å¿…é¡»å‡ºç°åœ¨è°ƒç”¨è¡¨è¾¾å¼æœ¬èº«ä¸­ï¼š

   ```go
   syscall.Syscall(SYS_READ, uintptr(fd), uintptr(unsafe.Point(p)), uintptr(n))
   ```

   ç¼–è¯‘å™¨é€šè¿‡å®‰æ’å¼•ç”¨çš„åˆ†é…å¯¹è±¡ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰è¢«ä¿ç•™å¹¶ä¸”ç›´åˆ°è°ƒç”¨å®Œæˆï¼ˆå³ä½¿æ¥è‡ªç±»å‹ï¼‰ä¹Ÿä¸ä¼šç§»åŠ¨ï¼Œæ¥å¤„ç†åœ¨æ±‡ç¼–ä¸­å®ç°çš„å‡½æ•°çš„è°ƒç”¨çš„å‚æ•°åˆ—è¡¨ä¸­è½¬æ¢ä¸ºuintptrçš„Pointerå•ç‹¬çœ‹æ¥ï¼Œåœ¨è°ƒç”¨è¿‡ç¨‹ä¸­ä¸å†éœ€è¦è¯¥å¯¹è±¡ã€‚

   **ä¸ºäº†ä½¿ç¼–è¯‘å™¨èƒ½å¤Ÿè¯†åˆ«è¿™ç§æ¨¡å¼ï¼Œè½¬æ¢å¿…é¡»å‡ºç°åœ¨å‚æ•°åˆ—è¡¨ä¸­**, ä¹Ÿå°±æ˜¯è¯´ uintptr ä¸èƒ½ä¿å­˜åœ¨ä¸­é—´å˜é‡ä¸­

   ```go
   u:=uintptr(unsafe.Pointer(p))
   syscall.Syscall(SYS_READ, uintptr(fd), u, uintptr(n))
   ```

5. å°†reflect.Value.Pointeræˆ–reflect.Value.UnsafeAddrçš„ç»“æœä»uintptrè½¬æ¢ä¸ºPointer

   åå°„åŒ…çš„åä¸ºPointerå’ŒUnsafeAddrçš„Valueæ–¹æ³•è¿”å›ç±»å‹uintptrè€Œä¸æ˜¯ `unsafe.Pointer` æ„åœ¨é˜²æ­¢è°ƒç”¨æ–¹å°†ç»“æ„ä¿®æ”¹ä¸ºä»»æ„çš„ç±»å‹ã€‚ ä½†æ˜¯è¿™å°±æ„å‘³ç€ç»“æ„æ˜¯æ¯”è¾ƒè„†å¼±çš„ï¼Œ æ‰€ä»¥è¦åœ¨ è°ƒç”¨å®Œä¹‹åç«‹å³å°†å…¶è½¬æ¢ä¸º Pointer åœ¨åŒä¸€ä¸ªè°ƒç”¨è¡¨è¾¾å¼ä¸­

   ```go
   p := (*int)(unsafe.Pointer(reflect.ValueOf(new(int)).Pointer()))
   ```

   åœ¨å°† uintptr è½¬æ¢å› Pointer ç»“æœä¹‹å‰ï¼Œ ä¸è¦å­˜å‚¨ uintptr çš„ç»“æ„

   ```go
   //  é”™è¯¯ç¤ºèŒƒ
   //	u := reflect.ValueOf(new(int)).Pointer()
   //	p := (*int)(unsafe.Pointer(u))
   ```

   

6. å°†reflect.SliceHeaderæˆ–reflect.StringHeaderæ•°æ®å­—æ®µä¸æŒ‡é’ˆè¿›è¡Œè½¬æ¢

   ä¸å‰é¢çš„æƒ…å†µä¸€æ ·ï¼Œåå°„æ•°æ®ç»“æ„SliceHeaderå’ŒStringHeaderå°†å­—æ®µDataå£°æ˜ä¸ºuintptrï¼Œä»¥é˜²æ­¢è°ƒç”¨è€…å°†ç»“æœæ›´æ”¹ä¸ºä»»æ„ç±»å‹ï¼Œè€Œæ— éœ€é¦–å…ˆå¯¼å…¥â€œ unsafeâ€ã€‚ä½†æ˜¯ï¼Œè¿™æ„å‘³ç€SliceHeaderå’ŒStringHeaderä»…åœ¨è§£é‡Šå®é™…åˆ‡ç‰‡æˆ–å­—ç¬¦ä¸²å€¼çš„å†…å®¹æ—¶æ‰æœ‰æ•ˆã€‚

   ```go
   //	var s string
   //	hdr := (*reflect.StringHeader)(unsafe.Pointer(&s)) // case 1
   //	hdr.Data = uintptr(unsafe.Pointer(p))              // case 6 (this case)
   //	hdr.Len = n
   // åœ¨è¿™ç§ç”¨æ³•ä¸­ï¼Œhdr.Dataå®é™…ä¸Šæ˜¯åœ¨å­—ç¬¦ä¸²æ ‡é¢˜ä¸­å¼•ç”¨åŸºç¡€æŒ‡é’ˆçš„æ›¿ä»£æ–¹æ³•ï¼Œè€Œä¸æ˜¯uintptrå˜é‡æœ¬èº«ã€‚
   ```

   é€šå¸¸ï¼Œreflect.SliceHeaderå’Œreflect.StringHeaderåªèƒ½ç”¨ä½œæŒ‡å‘å®é™…åˆ‡ç‰‡æˆ–å­—ç¬¦ä¸²çš„* reflect.SliceHeaderå’Œ* reflect.StringHeaderï¼Œè€Œä¸èƒ½ç”¨ä½œæ™®é€šç»“æ„ã€‚

   ```go
   //ç¨‹åºä¸åº”å£°æ˜æˆ–åˆ†é…è¿™äº›ç»“æ„ç±»å‹çš„å˜é‡ã€‚
   //
   //
   // var hdr Reflection.StringHeader
   // hdr.Data = uintptrï¼ˆunsafe.Pointerï¼ˆpï¼‰ï¼‰
   // hdr.Len = n
   // sï¼š= *ï¼ˆ* stringï¼‰ï¼ˆunsafe.Pointerï¼ˆï¼†hdrï¼‰ï¼‰// på¯èƒ½å·²ç»ä¸¢å¤±
   ```

   



### func Sizeof(x ArbitraryType) uintptr

  Sizeofæ¥å—ä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼xå¹¶è¿”å›å‡è®¾å˜é‡vçš„å­—èŠ‚å¤§å°ï¼Œå°±å¥½åƒvæ˜¯é€šè¿‡var v = xå£°æ˜çš„ä¸€æ ·ã€‚
  è¯¥å¤§å°ä¸åŒ…æ‹¬xå¯èƒ½å¼•ç”¨çš„ä»»ä½•å†…å­˜ã€‚
  ä¾‹å¦‚ï¼Œå¦‚æœxæ˜¯åˆ‡ç‰‡ï¼Œåˆ™Sizeofè¿”å›åˆ‡ç‰‡æè¿°ç¬¦çš„å¤§å°ï¼Œè€Œä¸æ˜¯è¯¥åˆ‡ç‰‡æ‰€å¼•ç”¨çš„å†…å­˜çš„å¤§å°ã€‚
Sizeofçš„è¿”å›å€¼æ˜¯Goå¸¸æ•°ã€‚



### func Offsetof(x ArbitraryType) uintptr

Offsetofè¿”å›xè¡¨ç¤ºçš„å­—æ®µçš„ç»“æ„å†…çš„åç§»é‡ï¼Œè¯¥åç§»é‡çš„æ ¼å¼å¿…é¡»ä¸ºstructValue.fieldã€‚ æ¢å¥è¯è¯´ï¼Œå®ƒè¿”å›ç»“æ„å¼€å§‹ä¸å­—æ®µå¼€å§‹ä¹‹é—´çš„å­—èŠ‚æ•°ã€‚ Offsetofçš„è¿”å›å€¼ä¸ºGoå¸¸æ•°ã€‚



### func Alignof(x ArbitraryType) uintptr

alignofæ¥å—ä»»ä½•ç±»å‹çš„è¡¨è¾¾å¼xå¹¶è¿”å›å‡è®¾å˜é‡vçš„æ‰€éœ€å¯¹é½æ–¹å¼ï¼Œå°±å¥½åƒvæ˜¯é€šè¿‡var v = xå£°æ˜çš„ä¸€æ ·ã€‚ å®ƒæ˜¯æœ€å¤§å€¼mï¼Œå› æ­¤vçš„åœ°å€å§‹ç»ˆä¸ºé›¶mod mã€‚ å®ƒä¸reflect.TypeOfï¼ˆxï¼‰.Alignï¼ˆï¼‰è¿”å›çš„å€¼ç›¸åŒã€‚ ä½œä¸ºä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœå˜é‡sæ˜¯ç»“æ„ç±»å‹ï¼Œè€Œfæ˜¯è¯¥ç»“æ„ä¸­çš„å­—æ®µï¼Œåˆ™Alignofï¼ˆs.fï¼‰å°†è¿”å›ç»“æ„ä¸­è¯¥ç±»å‹å­—æ®µçš„æ‰€éœ€å¯¹é½æ–¹å¼ã€‚ è¿™ç§æƒ…å†µä¸reflect.TypeOfï¼ˆs.fï¼‰.FieldAlignï¼ˆï¼‰è¿”å›çš„å€¼ç›¸åŒã€‚Alignofçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªGoå¸¸é‡ã€‚





### æ€»ç»“

Pointerçš„ä½¿ç”¨æ¨¡å¼

1.  å¯ä»¥ä» `*T1` è½¬ä¸º `*T2` 
2. å°†Pointerè½¬æ¢ä¸ºuintptrï¼Œ ä½†æ˜¯ uintptr æŒ‡å‘çš„å¯¹è±¡å¯èƒ½æ˜¯æ— æ•ˆçš„
3. ä½¿ç”¨ç®—æœ¯è¿ç®—å°† Pointer è½¬ä¸º uintptr å¹¶è¿”å›Pointer
4. è°ƒç”¨ `syscall.Syscall` æ—¶å°†æŒ‡é’ˆè½¬ä¸º uintptrï¼Œ éœ€è¦åœ¨è°ƒç”¨å‡½æ•°ä¸­å®Œæˆè½¬æ¢ï¼Œä¸è¦ä½¿ç”¨ä¸­é—´å˜é‡
5. å°†reflect.Value.Pointeræˆ–reflect.Value.UnsafeAddrçš„ç»“æœä»uintptrè½¬æ¢ä¸ºPointerï¼Œ éœ€è¦åœ¨åŒä¸€ä¸ªè¡¨è¾¾å¼ä¸­å®Œæˆ



### unsafe çš„ä¸€äº›ä½¿ç”¨

```go
package main

import (
    "fmt"
    "unsafe"
)

func main() {
    // æœ‰ç›¸åŒå†…å­˜å¸ƒå±€çš„ç±»å‹è½¬æ¢
    var i64 int64 = 9
    var f64 = *(*float64)(unsafe.Pointer(&i64))
    fmt.Println("pattern 1:", f64)
    var array [16]int
    // ä½¿ç”¨åç§»é‡æ¥è®¿é—®æ•°ç»„
    * (*int)(unsafe.Pointer(uintptr(unsafe.Pointer(&array)) + unsafe.Sizeof(int(0))*2)) = 2006
    fmt.Println("pattern 3:", array)
}

```

